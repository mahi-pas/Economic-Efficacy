<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>US Map</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
    href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
    rel="stylesheet">
    <style>
        .map {
            width: 50%;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            font-family: 'Inter', sans-serif;
        }
        h3 {
            text-align: center;
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body>
    <h1>Total Cost for Family of Four</h1>
    <div class="map" id="familyoffour"></div>
    <h1>Median Income after Tax for Family of Four</h1>
    <div class="map" id="familyoffourincome"></div>
    <h1>Leftover Income for Family of Four</h1>
    <div class="map" id="familyoffournet"></div>
    <h1>Total Cost for Single Person</h1>
    <div class="map" id="single"></div>
    <h1>Median Income after Tax for Single Person</h1>
    <div class="map" id="singleincome"></div>
    <h1>Leftover Income for Single Person</h1>
    <div class="map" id="singlenet"></div>
    <h1>Difference in Cost of Family vs Being Single</h1>
    <h3>How much more expensive is it to have a family?</h3>
    <div class="map" id="family-single"></div>
    <h1>Leftover Income for Family vs Single Person</h1>
    <h3>How much more money does a family have leftover compared to a single person?</h3>
    <div class="map" id="net-family-single"></div>
    <script>
        d3.csv("MyData/final_dataset.csv").then(function(data) {
            // Assume the CSV has columns: 'State Code' (e.g., 'AL', 'AK', etc.) and 'Total Cost for Family of 4'
            let locations = data.map(row => row['State Code']);
            let values = data.map(row => row['Total Cost for Family of 4']);

            const more_is_green = [
                ['0.0', 'rgb(141, 17, 17)'],
                ['0.111111111111', 'rgb(163, 42, 1)'],
                ['0.222222222222', 'rgb(182, 66, 0)'],
                ['0.333333333333', 'rgb(195, 90, 0)'],
                ['0.444444444444', 'rgb(202, 115, 0)'],
                ['0.555555555556', 'rgb(203, 141, 0)'],
                ['0.666666666667', 'rgb(197, 168, 0)'],
                ['0.777777777778', 'rgb(178, 197, 0)'],
                ['0.888888888889', 'rgb(147, 224, 0)'],
                ['1.0', 'rgb(30, 255, 0)']
            ];

            //inverse of more_is_green
            const less_is_green = [
                ['0.0', 'rgb(30, 255, 0)'],
                ['0.111111111111', 'rgb(147, 224, 0)'],
                ['0.222222222222', 'rgb(178, 197, 0)'],
                ['0.333333333333', 'rgb(197, 168, 0)'],
                ['0.444444444444', 'rgb(203, 141, 0)'],
                ['0.555555555556', 'rgb(202, 115, 0)'],
                ['0.666666666667', 'rgb(195, 90, 0)'],
                ['0.777777777778', 'rgb(182, 66, 0)'],
                ['0.888888888889', 'rgb(163, 42, 1)'],
                ['1.0', 'rgb(141, 17, 17)']
            ];

            let trace = {
                type: 'choropleth',
                locationmode: 'USA-states',
                locations: locations,
                z: values,
                colorscale: less_is_green,
            };

            let layout = {
                geo: { scope: 'usa' },
                margin: { t: 0, b: 0 }
            };
            
            Plotly.newPlot('familyoffour', [trace], layout);
            trace.z = data.map(row => row['Median Family Income']);
            trace.colorscale = more_is_green;
            Plotly.newPlot('familyoffourincome', [trace], layout);
            trace.z = data.map(row => row['Leftover Income for Family of Four']);
            trace.colorscale = more_is_green;
            Plotly.newPlot('familyoffournet', [trace], layout);
            trace.z = data.map(row => row['Total Cost for Single Person']);
            trace.colorscale = less_is_green;
            Plotly.newPlot('single', [trace], layout);
            trace.z = data.map(row => row['Median Single Income']);
            trace.colorscale = more_is_green;
            Plotly.newPlot('singleincome', [trace], layout);
            trace.z = data.map(row => row['Leftover Income for Single Person']);
            trace.colorscale = more_is_green;
            Plotly.newPlot('singlenet', [trace], layout);
            trace.z = data.map(row => row['Difference in Cost of Family vs Being Single']);
            trace.colorscale = less_is_green;
            Plotly.newPlot('family-single', [trace], layout);
            trace.z = data.map(row => row['Leftover Income for Family vs Single Person']);
            trace.colorscale = more_is_green;
            Plotly.newPlot('net-family-single', [trace], layout);
        });
    </script>
</body>
</html>